<div class="x_panel">
    <div class="x_title">
        <h2>{{vm.title}}</h2>
        <ul class="nav navbar-right panel_toolbox">
            <li>
                <button onclick="window.history.go(-1); return false;" class="btn btn-default">
                    <i class="fa fa-backward"></i>
                    Back
                </button>
            </li>
        </ul>
        <div class="clearfix"></div> 
    </div>
    <div class="x_content">
        <form name="form" class="form-horizontal" novalidate>            
            <div class="row">
                 <div class="col-md-12">
                    <div class="form-group"
                        data-ng-class="{ 'has-error': form.category.$error.required && form.$submitted }">
                        <div class="col-md-3">
                            <span class="control-label">
                                Category
                                <span class="required">*</span>
                            </span>
                        </div>
                        <div class="col-md-6">
                            <select data-ng-model="vm.product.categories_id" name="category"
                                data-ng-options="c.categories_id as c.detail[0].categories_name for c in vm.categoryList.elements"
                                class="form-control"
                                required
                            >
                                <option value="">Select Category</option>
                            </select>
                        </div>
                    </div>
                </div> 
                <div class="col-md-12">
                    <div class="form-group"
                        data-ng-class="{ 'has-error': form.name.$error.required && form.$submitted }">
                        <div class="col-md-3">
                            <span class="control-label">
                                Name Khmer
                                <span class="required">*</span>
                            </span>
                        </div>
                        <div class="col-md-6">
                            <input type="text"
                                class="form-control"
                                data-ng-model="vm.productDescription.products_name_kh"
                                name="name"
                                placeholder="Name Khmer"
                                required="required" />
                        </div>
                    </div>
                </div> 
                <div class="col-md-12">
                    <div class="form-group"
                        data-ng-class="{ 'has-error': form.name_en.$error.required && form.$submitted }">
                        <div class="col-md-3">
                            <span class="control-label">
                                Name English
                                <span class="required">*</span>
                            </span>
                        </div>
                        <div class="col-md-6">
                            <input type="text"
                                class="form-control"
                                data-ng-model="vm.productDescription.products_name_en"
                                name="name_en"
                                placeholder="Name English"
                                required="required" />
                        </div>
                    </div>
                </div> 
                <div class="col-md-12">
                    <div class="form-group"
                        data-ng-class="{ 'has-error': form.price.$error.required && form.$submitted }">
                        <div class="col-md-3">
                            <span class="control-label">
                                Price
                                <span class="required">*</span>
                            </span>
                        </div>
                        <div class="col-md-6">
                            <input type="number"
                                class="form-control"
                                data-ng-model="vm.product.products_price"
                                name="price"
                                placeholder="Price"
                                required="required" />
                        </div>
                    </div>
                </div> 
                <div class="col-md-12">
                    <div class="form-group"
                        data-ng-class="{ 'has-error': form.discount.$error.required && form.$submitted }">
                        <div class="col-md-3">
                            <span class="control-label">
                                Discount
                            </span>
                        </div>
                        <div class="col-md-6">
                            <input type="number"
                                class="form-control"
                                data-ng-model="vm.product.products_discount"
                                name="discount"
                                placeholder="Discount"/>
                        </div>
                    </div>
                </div> 
                <div class="col-md-12">
                    <div class="form-group"
                        data-ng-class="{ 'has-error': form.products_quantity.$error.required && form.$submitted }">
                        <div class="col-md-3">
                            <span class="control-label">
                                Qty
                            </span>
                        </div>
                        <div class="col-md-6">
                            <input type="number"
                                class="form-control"
                                data-ng-model="vm.product.products_quantity"
                                name="products_quantity"
                                placeholder="Qty"/>
                        </div>
                    </div>
                </div> 
                <div class="col-md-12">
                    <div class="form-group"
                        data-ng-class="{ 'has-error': form.discount.$error.required && form.$submitted }">
                        <div class="col-md-3">
                            <span class="control-label">
                                Image
                            </span>
                        </div>
                        <div class="col-md-6">
                             <input
                                type="file"
                                ng-model="vm.picFile"
                                name="file"
                                accept="image/*"
                                ngf-max-size="10MB"
                                ngf-model-invalid="errorFiles"
                                ngf-select="vm.uploadPic(vm.picFile, 'feature_image')"
                                class="form-control"
                            >
                            <i>Recommand Image Size = 440 * 600 px</i>
                            <br/>
                            <i ng-show="form.file.$error.maxSize">
                                File too large {{errorFiles[0].size / 1000000|number:1}}MB: max 10M
                            </i>
                            <img ng-show="vm.product.products_image_thumbnail"
                                class="img-thumbnail"
                                style="width:150px"
                                src="../{{vm.product.products_image_thumbnail}}"/>
                            <span class="progress" ng-show="vm.picFile.progress >= 0">
                                <div style="width:{{picFile.progress}}%"
                                    ng-bind="vm.picFile.progress + '%'">
                                </div>
                            </span>
                            <span ng-show="vm.picFile.result">Upload Successful</span>
                            <span class="err" ng-show="errorMsg">{{errorMsg}}</span>
                        </div>
                    </div>
                </div> 
                <div class="col-md-12">
                    <div class="form-group"
                        data-ng-class="{ 'has-error': form.products_description_kh.$error.required && form.$submitted }">
                        <div class="col-md-3">
                            <span class="control-label">
                                Description Khmer
                            </span>
                        </div>
                        <div class="col-md-6">
                            <trix-editor placeholder="Description Khmer"
                                angular-trix
                                style="min-height: 200px; overflow: auto"
                                data-ng-model="vm.productDescription.products_description_kh"
                            ></trix-editor>
                        </div>
                    </div>
                </div> 
                <div class="col-md-12">
                    <div class="form-group"
                        data-ng-class="{ 'has-error': form.products_description_en.$error.required && form.$submitted }">
                        <div class="col-md-3">
                            <span class="control-label">
                                Description English
                            </span>
                        </div>
                        <div class="col-md-6">
                            <trix-editor placeholder="Description English"
                                angular-trix
                                style="min-height: 200px; overflow: auto"
                                data-ng-model="vm.productDescription.products_description_en"
                            ></trix-editor>
                        </div>
                    </div>
                </div> 
                <div class="col-md-12">
                    <div class="form-group"
                        data-ng-class="{ 'has-error': form.discount.$error.required && form.$submitted }">
                        <div class="col-md-3">
                            <span class="control-label">
                                Option Image
                            </span>
                        </div>
                        <div class="col-md-9">
                            <input
                                type="file"
                                ng-model="vm.picOptFile"
                                name="fileOpt"
                                accept="image/*"
                                ngf-max-size="10MB"
                                ngf-model-invalid="vm.errorFiles"
                                ngf-select="vm.uploadPic(vm.picOptFile, 'optional')"
                                class="form-control"
                            >
                            <div ng-show="form.fileOpt.$error.maxSize" class="error">
                                File too large {{vm.errorFiles[0].size / 1000000|number:1}}MB: max 10M
                            </div>
                            <span class="progress" ng-show="vm.picOptFile.progress >= 0">
                                <div
                                    style="width:{{vm.picOptFile.progress}}%"
                                    ng-bind="vm.picOptFile.progress + '%'"
                                >
                                </div>
                            </span>
                            <span data-ng-repeat="i in vm.optionalImage">
                                <div class="col-md-3">
                                    <img class="img-thumbnail" src="../{{i.image_thumbnail}}"/>
                                    <button  class="btn btn-danger btn-xs"
                                        data-ng-click="vm.removeImage($index);"
                                        uib-tooltip="Remove"
                                    >
                                        <i class="fa fa-trash"></i>
                                        Remove
                                    </button>
                                </div>
                            </span>
                        </div>
                    </div>
                </div> 
            </div>
            <save-template cancel="vm.cancel()" save="vm.save()" disable="vm.loading"></save-template>	
        </form>
    </div>
</div>